services:
  asset-manager:
    build: .
    container_name: valdo-asset-manager
    ports:
      - "8501:8501"
    volumes:
      - ./assets.db:/app/assets.db
      - ./data:/app/data
    restart: unless-stopped

  ngrok:
    image: ngrok/ngrok:latest
    container_name: valdo-ngrok
    # Command: Open HTTP tunnel to the 'asset-manager' service on port 8501
    command: http asset-manager:8501
    ports:
      - "4040:4040" # Web Interface for inspection
    environment:
      # Optional: User can set this in .env or rely on anonymous (short session)
      - NGROK_AUTHTOKEN=${NGROK_AUTHTOKEN:-}
    depends_on:
      - asset-manager
